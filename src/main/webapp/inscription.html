<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>PROACT'IF - Inscription</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/styles.css" />
    </head>
    <body>
        <form id="form-inscription">
          <h1>Inscription</h1>

          <!-- Partie informations personnelles -->
          <section class="margin-top-30">
            <h3>Mes informations personnelles</h3>
            <div class="row">
              <div class="col-lg-2 col-md-2">
                <div class="form-group">
                  <label for="champ-civilite">Civilité</label>
                  <select id="champ-civilite" class="form-control">
                    <option>Monsieur</option>
                    <option>Madame</option>
                  </select>
                </div>
              </div>
              <div class="col-lg-5 col-md-5">
                <div class="form-group">
                  <label for="champ-prenom">Prénom</label>
                  <input  id="champ-prenom" type="text" class="form-control" placeholder="Votre prénom">
                </div>
              </div>
              <div class="col-lg-5 col-md-5">
                <div class="form-group">
                  <label for="champ-nom">Nom</label>
                  <input  id="champ-nom" type="text" class="form-control" placeholder="Votre nom">
                </div>
              </div>
            </div>
          </div>

            <div class="form-group">
              <label for="champ-datenaissance">Date de naissance</label>
              <input  id="champ-datenaissance" type="date" class="form-control">
            </div>

            <div class="form-group">
              <label for="champ-telephone">Numéro de téléphone</label>
              <input  id="champ-telephone" type="text" class="form-control" placeholder="Votre numéro de téléphone">
            </div>

            <div class="form-group">
              <label for="champ-login">Adresse email</label>
              <input  id="champ-login" type="email" class="form-control" placeholder="Votre adresse mail">
            </div>

            <div class="form-group">
              <label for="champ-pass1">Mot de passe</label>
              <input  id="champ-pass1" type="password" class="form-control" placeholder="Votre mot de passe">
            </div>

            <div class="form-group">
              <label for="champ-pass2">Retaper votre mot de passe</label>
              <input  id="champ-pass2" type="password" class="form-control" placeholder="Votre mot de passe">
            </div>
          </section>

          <!-- Partie Adresse -->
          <section class="margin-top-30">
            <h3>Mon adresse</h3>

            <div class="row">
              <div class="col-lg-2 col-md-2">
                <div class="form-group">
                  <label for="champ-num">Numéro</label>
                  <input  id="champ-num" type="number" class="form-control" placeholder="Numero">
                </div>
              </div>
              <div class="col-lg-10 col-md-10">
                <div class="form-group">
                  <label for="champ-rue">Rue</label>
                  <input  id="champ-rue" type="text" class="form-control" placeholder="Votre rue">
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-4 col-md-4">
                <div class="form-group">
                  <label for="champ-cp">Code postal</label>
                  <input  id="champ-cp" type="text" class="form-control" placeholder="Votre code postal">
                </div>
              </div>
              <div class="col-lg-8 col-md-8">
                <div class="form-group">
                  <label for="champ-ville">Ville</label>
                  <input  id="champ-ville" type="text" class="form-control" placeholder="Votre ville">
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="champ-complement">Complément d'adresse</label>
              <textarea id="champ-complement"class="form-control" rows="3"></textarea>
            </div>
          </section>
        </form>
    </body>

    <script>

        function inscription() {
            var champCivilite = $('#champ-civilite').val();
            var champPrenom = $('#champ-prenom').val();
            var champNom = $('#champ-nom').val();
            var champDateNaissance = $('#champ-datenaissance').val();
            var champTelephone = $('#champ-telephone').val();
            var champLogin = $('#champ-login').val();
            var champPassword = $('#champ-pass1').val();
            var champNumero = $('#champ-num').val();
            var champRue = $('#champ-rue').val();
            var champCodePostal = $('#champ-cp').val();
            var champVille = $('#champ-ville').val();
            var champComplement = $('#champ-complement').val();

            $('#message').html('Connexion en cours...');

            $.ajax({
                url: './ActionServlet',
                method: 'POST',
                data: {
                    action: 'inscrire',
                    civilite: champCivilite,
                    prenom: champPrenom,
                    nom: champNom,
                    dateNaissance: champDateNaissance,
                    telephone: champTelephone,
                    login: champLogin,
                    mdp: champPassword,
                    numero: champNumero,
                    rue: champRue,
                    codePostal: champCodePostal,
                    ville: champVille,
                    infosSuppAdresse: champComplement
                },
                dataType: 'json'
            }).done(function (data) {
                console.log(data);

                //var retour = data.retourConnexion;
                //console.log(retour);

                // si connexion ok, aller sur la page suivante :
                if (retour.localeCompare('ok') == 0) {
                    //window.location = "maPageSuivante.html";
                }
                else if (retour.localeCompare('nok') == 0) {
                  $('#message').html('Echec de la connexion, votre adresse email ou mot de passe est incorrect.');
                  $('#message').css('display', 'block');
                  $('#champ-login').addClass('is-invalid');
                  $('#champ-password').addClass('is-invalid');
                }


            });
        }

        $(document).ready(function () {
            // ajout d'un "handler" sur le clic du bouton de connexion
            $('#bouton-connexion').on('click', function (e) {
                e.preventDefault();
                // affichage pour debugage dans la console javascript du navigateur
                console.log('Click sur le bouton "Se Connecter"');
                // appel de la fonction connexion
                connexion();
            });
        });

    </script>
</html>
