<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>PROACT'IF - Demande d'intervention</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/fonctions.js"></script>
        <link rel="stylesheet" href="css/bootstrap.min.css" />
        <link rel="stylesheet" href="css/styles.css" />
    </head>
    <body>
      <nav class="navbar navbar-light bg-light justify-content-between">
        <a class="navbar-brand">PROACT'IF</a>
        <form class="form-inline nav-item dropdown">
          <a id="utilisateur-connecte" class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
           Connecté
         </a>
         <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
           <a class="dropdown-item" href="interventions.html">Mes interventions</a>
           <a class="dropdown-item" href="modification.html">Mes données personnelles</a>
           <a id="btn-deconnexion" class="dropdown-item" href="#">Se déconnecter</a>
         </div>
        </form>
      </nav>

        <img class="img-width-100prct" src="images/banniere.jpeg">
        <div class="text-center entete-page">
            <h1>Mes interventions</h1>
            <p class="margin-top-15">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae lorem odio.</p>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#demander-intervention">Demander une intervention</button>
        </div>

        <form>
            <div class="form-control">
                <label>Trier par</label>
                <select class="form-control" id="filtreTri">
                    <option>Date</option>
                    <option>Intitule</option>
                </select>
            </div>

            <div class="form-control">
                <input type="text" class="form-control" placeholder="" id="recherche">
                <button class="btn btn-secondary" id="bouton-recherche">Rechercher</button>
            </div>

        </form>

        <table class="table table-interventions" class="table">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Intitulé</th>
              <th scope="col">Type</th>
              <th scope="col">Employé</th>
              <th scope="col">Etat</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id="lesInterventions">
          </tbody>
        </table>


        <footer>
          <div id="footer-text" class="text-center">
            <span>PROACT'IF 2018 Copyright</span>
          </div>
        </footer>
    </body>

    <!-- Fenêtre modal pour demander l'intervention -->
    <div id="demander-intervention" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Demander une intervention</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- Client -->
            <section class="margin-top-30">
              <h2 class="text-center">Informations personnelles</h2>

              <div class="row">
                <div class="col-lg-2 col-md-2">
                  <div class="form-group">
                    <label for="champ-civilite">Civilité</label>
                    <select id="champ-civilite" class="form-control" disabled>
                      <option>Monsieur</option>
                      <option>Madame</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-5 col-md-5">
                  <div class="form-group">
                    <label for="champ-prenom">Prénom</label>
                    <input  id="champ-prenom" type="text" class="form-control" placeholder="Votre prénom" disabled>
                  </div>
                </div>
                <div class="col-lg-5 col-md-5">
                  <div class="form-group">
                    <label for="champ-nom">Nom</label>
                    <input  id="champ-nom" type="text" class="form-control" placeholder="Votre nom" disabled>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="champ-telephone">Numéro de téléphone</label>
                <input  id="champ-telephone" type="text" class="form-control" placeholder="Votre numéro de téléphone" disabled>
              </div>

              <div class="row">
                <div class="col-lg-2 col-md-2">
                  <div class="form-group">
                    <label for="champ-num">Numéro</label>
                    <input  id="champ-num" type="number" class="form-control" placeholder="Numero" disabled>
                  </div>
                </div>
                <div class="col-lg-10 col-md-10">
                  <div class="form-group">
                    <label for="champ-rue">Rue</label>
                    <input  id="champ-rue" type="text" class="form-control" placeholder="Votre rue" disabled>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-lg-4 col-md-4">
                  <div class="form-group">
                    <label for="champ-cp">Code postal</label>
                    <input  id="champ-cp" type="text" class="form-control" placeholder="Votre code postal" disabled>
                  </div>
                </div>
                <div class="col-lg-8 col-md-8">
                  <div class="form-group">
                    <label for="champ-ville">Ville</label>
                    <input  id="champ-ville" type="text" class="form-control" placeholder="Votre ville" disabled>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="champ-complement">Complément d'adresse</label>
                <textarea id="champ-complement" class="form-control" rows="3" disabled></textarea>
              </div>

              <div class="text-center">
                <a href="modification.html" class="btn btn-secondary">Modifier mes informations</a>
              </div>
            </section>

            <!-- Informations -->
            <section class="margin-top-30">
              <h2 class="text-center">Intervention</h2>

              <div class="form-group">
                <label for="champ-intitule">Intitulé</label>
                <input  id="champ-intitule" type="text" class="form-control" placeholder="L'intitulé de l'intervention">
              </div>

              <div class="form-group">
                <label for="champ-type">Type</label>
                <select id="champ-type" class="form-control">
                  <option>Incident</option>
                  <option>Animal</option>
                  <option>Livraison</option>
                </select>
              </div>

              <div id="consulter-champs-animal" class="invisible">
                <div class="form-group">
                  <label for="champ-nom-animal">Nom</label>
                  <input  id="champ-nom-animal" type="text" class="form-control" placeholder="Le nom de votre animal">
                </div>
                <div class="form-group">
                  <label for="champ-type-animal">Type (Chat, Chien ...)</label>
                  <input  id="champ-type-animal" type="text" class="form-control" placeholder="Le type de votre animal">
                </div>
              </div>

              <div id="consulter-champs-livraison" class="invisible">
                <div class="row">
                  <div class="col-lg-4 col-md-4">
                    <div class="form-group">
                      <label for="champ-livraison-heure">Date et heure</label>
                      <input  id="champ-livraison-heure" type="datetime-local" class="form-control" placeholder="Heure de livraison">
                    </div>
                  </div>
                  <div class="col-lg-8 col-md-8">
                    <div class="form-group">
                      <label for="champ-livraison-type">Type (Colis, lettre recommandée ...)</label>
                      <input  id="champ-livraison-type" type="text" class="form-control" placeholder="Type de livraison">
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="champ-code-suivi">Code suivi</label>
                  <input  id="champ-code-suivi" type="text" class="form-control" placeholder="Code suivi">
                </div>
                <div class="form-group">
                  <label for="champ-entreprise">Entreprise</label>
                  <input  id="champ-entreprise" type="text" class="form-control" placeholder="Entreprise de livraison">
                </div>
              </div>

              <div class="form-group">
                <label for="champ-description">Description</label>
                <textarea id="champ-description"class="form-control" rows="3"></textarea>
              </div>
            </section>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
            <button id='bouton-demander-intervention' type="button" class="btn btn-primary">Enregistrer</button>
          </div>
        </div>
      </div>
    </div>

    <div id="modals-consultation"></div>

    <div id="modalCreationInterventionEchec" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Demande d'intervention</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>La demande d'intervention n'a pas pu être effectuée, nous vous invitons à ressayer ultérieurement.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="modalCreationInterventionSucces" class="modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Demande d'intervention</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>La demande d'intervention s'est effectuée avec succès.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script>


        $(document).ready(function () {

            obtenirInterventions();

            $('#bouton-demander-intervention').click(function() {
                //TODO vérifier champs remplis

                demanderIntervention();
            });
            $('#bouton-recherche').click(function(e) {
                //TODO vérifier champs remplis
                e.preventDefault();
                obtenirInterventions();
            });

            $( "#champ-type" ).change(function() {
              var type = $(this).val();
              console.log(type);

              $('#consulter-champs-animal').addClass('invisible');
              $('#consulter-champs-livraison').addClass('invisible');

              if (type.localeCompare('Animal') == 0) {
                  $('#consulter-champs-animal').removeClass('invisible');
              }
              else if (type.localeCompare('Livraison') == 0) {
                $('#consulter-champs-livraison').removeClass('invisible');
              }
            });
        });
    </script>
</html>
